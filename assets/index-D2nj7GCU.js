var L=Object.defineProperty;var S=(a,e,t)=>e in a?L(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var h=(a,e,t)=>S(a,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const E=[{title:"Descubre Bangkok",description:"Marruecos, África",image:"./img/placeholder1.png",price:248,priceBase:1124,taxes:150,total:2455,activity:"quads",destination:"madrid",accommodation:"hotel",numberOfdays:9},{title:"Aventura en el cielo",description:"Colombia",image:"./img/placeholder2.png",price:199,priceBase:980,taxes:120,total:2100,activity:"parapente",destination:"barcelona",accommodation:"department",numberOfdays:5},{title:"Surfea en Bali",description:"Indonesia",image:"./img/placeholder3.png",price:270,priceBase:1100,taxes:160,total:2390,activity:"surf",destination:"asia",accommodation:"house",numberOfdays:6},{title:"Descubre Bangkok",description:"Marruecos, África",image:"./img/placeholder1.png",price:248,priceBase:1124,taxes:150,total:2455,activity:"quads",destination:"asia",accommodation:"house",numberOfdays:9},{title:"Aventura en el cielo",description:"Colombia",image:"./img/placeholder2.png",price:199,priceBase:980,taxes:120,total:2100,activity:"parapente",destination:"america",accommodation:"department",numberOfdays:5},{title:"Surfea en Bali",description:"Indonesia",image:"./img/placeholder3.png",price:270,priceBase:1100,taxes:160,total:2390,activity:"surf",destination:"africa",accommodation:"hotel",numberOfdays:6},{title:"Surfea en Bali",description:"Indonesia",image:"./img/placeholder3.png",price:270,priceBase:1100,taxes:160,total:2390,activity:"surf",destination:"africa",accommodation:"hotel",numberOfdays:6},{title:"Surfea en Bali",description:"Indonesia",image:"./img/placeholder3.png",price:270,priceBase:1100,taxes:160,total:2390,activity:"surf",destination:"africa",accommodation:"hotel",numberOfdays:6},{title:"Surfea en Bali",description:"Indonesia",image:"./img/placeholder3.png",price:270,priceBase:1100,taxes:160,total:2390,activity:"surf",destination:"africa",accommodation:"hotel",numberOfdays:6}];function C(){const a=document.querySelector(".carousel__slides"),e=document.querySelectorAll(".carousel__slide").length,t=document.querySelector(".carousel__dots");let n=0;for(let o=0;o<e;o++){const r=document.createElement("button");r.classList.add("carousel__dot"),r.dataset.slideTo=o,t.appendChild(r),r.addEventListener("click",()=>{i(o)})}function i(o){o<0&&(o=e-1),o>=e&&(o=0),a.style.transform=`translateX(-${o*100}%)`,n=o,s()}function s(){const o=document.querySelectorAll(".carousel__dot");o.forEach(r=>r.classList.remove("carousel__dot--active")),o[n].classList.add("carousel__dot--active")}s(),document.querySelector(".carousel__nav--prev").addEventListener("click",()=>{i(n-1)}),document.querySelector(".carousel__nav--next").addEventListener("click",()=>{i(n+1)}),setInterval(()=>{i(n+1)},1e4)}class O{constructor(){h(this,"handleOutsideClick",e=>{this.popover.contains(e.target)||this.close()});this.popover=document.getElementById("popover-details"),this.btnClose=null}open(e,t){const n=t.getBoundingClientRect();this.popover.classList.remove("hidden"),this.popover.setAttribute("data-visible","true"),this.popover.innerHTML=`
      <header>
        <strong>Desglose de precios</strong>
        <button class="popover-details__close">
          <img src="/img/close.svg" aria-label="Cerrar ventana" alt="Cerrar">
        </button>
      </header>
      <section class="popover-details__content">
        <h3 class="popover-details__content-title">${e.description}<span>${e.numberOfdays} días</span></h3>
        <div class="popover-details__content-prices">
        <p class="popover-details__content-price">
          <span>Precio base:</span> <strong class="popover-details__content-price-base">${e.priceBase}€</strong> 
        </p>
        <p class="popover-details__content-price">
          <span>Impuestos:</span> <strong class="popover-details__content-price-tax">${e.taxes}€</strong> 
        </p>
        </div>
      </section>
      <footer>
        <span>Total:</span> <span class="popover-details__content-price-total">${e.total} €</span>
      </footer>
    `,this.btnClose=this.popover.querySelector(".popover-details__close"),this.btnClose.addEventListener("click",()=>this.close()),window.addEventListener("keydown",i=>{i.key==="Escape"&&this.close()}),window.innerWidth<=697?(this.popover.style.position="fixed",this.popover.style.top=0,this.popover.style.left=0):(this.popover.style.position="absolute",this.popover.style.top=`${n.bottom+window.scrollY}px`,this.popover.style.left=`${n.left+window.scrollX-15}px`),setTimeout(()=>{document.body.addEventListener("click",this.handleOutsideClick),this.btnClose.focus()})}close(){this.popover.classList.add("hidden"),this.popover.setAttribute("data-visible","false"),document.body.removeEventListener("click",this.handleOutsideClick)}}class x{constructor(e){this.data=e,this.popover=new O}render(){const e=document.createElement("div");e.className="card",e.innerHTML=`
      <img src="${this.data.image}" alt="${this.data.title}" class="card__image">
      <span class="card__tag">${this.data.activity}</span>
      <header class="card__header">
        <p class="card__description">${this.data.description}<span>${this.data.numberOfdays} días</span></p>
        <h3 class="card__title">${this.data.title}</h3>
      </header>
      <footer class="card__footer">
        <span class="card__price">
          <div>
          <p class="card__price-label">Desde</p>
          <strong class="card__price-amount">${this.data.price} €</strong>
          </div>
          
          <button aria-label="Ver detalles" class="card__see-details"><span>Ver detalles </span><img src="./img/chevron-down.svg" class="card__see-details-icon"></button>
        </span>
        <button aria-label="Reservar" class="card__button-reserve">Reservar</button>
      </footer>
    `;const t=e.querySelector(".card__see-details");return t.addEventListener("click",()=>{this.popover.open(this.data,t)}),e}}function k(a,e={}){return a.filter(t=>{var u,m,v;let n=!0,i=!0,s=!0,o=!0;n=!((u=e.activity)!=null&&u.length)||e.activity.includes(t.activity),i=!((m=e.destination)!=null&&m.length)||e.destination.includes(t.destination),s=!((v=e.accommodation)!=null&&v.length)||e.accommodation.includes(t.accommodation);const r=t.price,c=e.price?e.price.min:null,l=e.price?e.price.max:null;return c!==null&&l!==null?o=r>=c&&r<=l:c!==null?o=r>=c:l!==null&&(o=r<=l),n&&i&&s&&o})}function d(a,e){return Array.from(a.querySelectorAll(`input[name="${e}"]:checked`)).map(t=>t.value)}const f=document.getElementById("cards-container"),I=document.getElementById("form-filters"),g=document.querySelector(".nav__toggle"),q=document.querySelector(".nav__links"),y=document.querySelector(".filters-toogle-button"),b=document.querySelector(".filters-wrapper"),_=document.getElementById("close-bilters-button");function p(a,e){const t=a.getAttribute("data-visible")==="true";a.setAttribute("data-visible",!t),e.setAttribute("aria-expanded",!t)}g.addEventListener("click",()=>{p(q,g)});y.addEventListener("click",()=>{p(b,y)});_.addEventListener("click",()=>{p(b,_)});function B(a={}){f.innerHTML="",k(E,a).forEach(t=>{const n=new x(t);f.appendChild(n.render())})}I.addEventListener("change",a=>{const e=a.currentTarget,t=d(e,"activity"),n=d(e,"accommodation"),i=d(e,"destination"),s=document.getElementById("minPrice"),o=document.getElementById("maxPrice"),r=s?parseFloat(s.value):null,c=o?parseFloat(o.value):null,l={activity:t,accommodation:n,destination:i,price:{min:isNaN(r)?null:r,max:isNaN(c)?null:c}};B(l)});C();B();
