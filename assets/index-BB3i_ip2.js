var L=Object.defineProperty;var A=(o,e,i)=>e in o?L(o,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[e]=i;var f=(o,e,i)=>A(o,typeof e!="symbol"?e+"":e,i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}})();const C=[{title:"Descubre Bangkok",description:"Marruecos, África",image:"./img/placeholder1.png",price:248,priceBase:1124,taxes:150,total:2455,activity:"quads",destination:"madrid",accommodation:"hotel",numberOfdays:9},{title:"Aventura en el cielo",description:"Colombia",image:"./img/placeholder2.png",price:199,priceBase:980,taxes:120,total:2100,activity:"parapente",destination:"barcelona",accommodation:"department",numberOfdays:5},{title:"Surfea en Bali",description:"Indonesia",image:"./img/placeholder3.png",price:270,priceBase:1100,taxes:160,total:2390,activity:"surf",destination:"asia",accommodation:"house",numberOfdays:6},{title:"Descubre Bangkok",description:"Marruecos, África",image:"./img/placeholder1.png",price:248,priceBase:1124,taxes:150,total:2455,activity:"quads",destination:"asia",accommodation:"house",numberOfdays:9},{title:"Aventura en el cielo",description:"Colombia",image:"./img/placeholder2.png",price:199,priceBase:980,taxes:120,total:2100,activity:"parapente",destination:"america",accommodation:"department",numberOfdays:5},{title:"Surfea en Bali",description:"Indonesia",image:"./img/placeholder3.png",price:270,priceBase:1100,taxes:160,total:2390,activity:"surf",destination:"africa",accommodation:"hotel",numberOfdays:6},{title:"Surfea en Bali",description:"Indonesia",image:"./img/placeholder3.png",price:270,priceBase:1100,taxes:160,total:2390,activity:"surf",destination:"africa",accommodation:"hotel",numberOfdays:6},{title:"Surfea en Bali",description:"Indonesia",image:"./img/placeholder3.png",price:270,priceBase:1100,taxes:160,total:2390,activity:"surf",destination:"africa",accommodation:"hotel",numberOfdays:6},{title:"Surfea en Bali",description:"Indonesia",image:"./img/placeholder3.png",price:270,priceBase:1100,taxes:160,total:2390,activity:"surf",destination:"africa",accommodation:"hotel",numberOfdays:6}];function O(){const o=document.querySelector(".carousel__slides"),e=document.querySelectorAll(".carousel__slide").length,i=document.querySelector(".carousel__dots");let a=0;o.setAttribute("role","region"),o.setAttribute("aria-live","polite"),o.setAttribute("aria-label","Carrusel de promociones");for(let s=0;s<e;s++){const p=document.createElement("button");p.classList.add("carousel__dot"),p.dataset.slideTo=s,i.appendChild(p),p.addEventListener("click",()=>{t(s),c()})}function t(s){s<0&&(s=e-1),s>=e&&(s=0),o.style.transform=`translateX(-${s*100}%)`,a=s,n(),r()}function n(){const s=document.querySelectorAll(".carousel__dot");s.forEach(p=>p.classList.remove("carousel__dot--active")),s[a].classList.add("carousel__dot--active")}function r(){document.querySelectorAll(".carousel__slide").forEach((p,E)=>{p.setAttribute("aria-hidden",E!==a)})}n(),r(),document.querySelector(".carousel__nav--prev").addEventListener("click",()=>{t(a-1),c()}),document.querySelector(".carousel__nav--next").addEventListener("click",()=>{t(a+1),c()});let l=setInterval(()=>{t(a+1)},1e4);function c(){clearInterval(l),l=setInterval(()=>{t(a+1)},1e4)}let d=0,u=0;o.addEventListener("touchstart",s=>{d=s.changedTouches[0].screenX}),o.addEventListener("touchend",s=>{u=s.changedTouches[0].screenX,m()});function m(){u<d-50?(t(a+1),c()):u>d+50&&(t(a-1),c())}}class w{constructor(){f(this,"handleOutsideClick",e=>{this.popover.contains(e.target)||this.close()});this.popover=document.getElementById("popover-details"),this.btnClose=null}open(e,i){const a=i.getBoundingClientRect();this.popover.classList.remove("hidden"),this.popover.setAttribute("data-visible","true"),this.popover.innerHTML=`
      <header>
        <strong>Desglose de precios</strong>
        <button class="popover-details__close">
          <img src="./img/close.svg" aria-label="Cerrar ventana" alt="Cerrar">
        </button>
      </header>
      <section class="popover-details__content">
        <h3 class="popover-details__content-title">${e.description}<span>${e.numberOfdays} días</span></h3>
        <div class="popover-details__content-prices">
        <p class="popover-details__content-price">
          <span>Precio base:</span> <strong class="popover-details__content-price-base">${e.priceBase}€</strong> 
        </p>
        <p class="popover-details__content-price">
          <span>Impuestos:</span> <strong class="popover-details__content-price-tax">${e.taxes}€</strong> 
        </p>
        </div>
      </section>
      <footer>
        <span>Total:</span> <span class="popover-details__content-price-total">${e.total} €</span>
      </footer>
    `,this.btnClose=this.popover.querySelector(".popover-details__close"),this.btnClose.addEventListener("click",()=>this.close()),window.addEventListener("keydown",t=>{t.key==="Escape"&&this.close()}),window.innerWidth<=697?(this.popover.style.position="fixed",this.popover.style.top=0,this.popover.style.left=0):(this.popover.style.position="absolute",this.popover.style.top=`${a.bottom+window.scrollY}px`,this.popover.style.left=`${a.left+window.scrollX-15}px`),setTimeout(()=>{document.body.addEventListener("click",this.handleOutsideClick),this.btnClose.focus()})}close(){this.popover.classList.add("hidden"),this.popover.setAttribute("data-visible","false"),document.body.removeEventListener("click",this.handleOutsideClick)}}class I{constructor(e){this.data=e,this.popover=new w}render(){const e=document.createElement("div");e.className="card",e.innerHTML=`
      <img src="${this.data.image}" alt="${this.data.title}" class="card__image">
      <span class="card__tag">${this.data.activity}</span>
      <header class="card__header">
        <p class="card__description">${this.data.description}<span>${this.data.numberOfdays} días</span></p>
        <h3 class="card__title">${this.data.title}</h3>
      </header>
      <footer class="card__footer">
        <span class="card__price">
          <div>
          <p class="card__price-label">Desde</p>
          <strong class="card__price-amount">${this.data.price} €</strong>
          </div>
          
          <button aria-label="Ver detalles" class="card__see-details"><span>Ver detalles </span><img src="./img/chevron-down.svg" alt="Ver detalles de precios" class="card__see-details-icon"></button>
        </span>
        <button aria-label="Reservar" class="card__button-reserve">Reservar</button>
      </footer>
    `;const i=e.querySelector(".card__see-details");return i.addEventListener("click",()=>{this.popover.open(this.data,i)}),e}}function x(o,e={}){return o.filter(i=>{var u,m,s;let a=!0,t=!0,n=!0,r=!0;a=!((u=e.activity)!=null&&u.length)||e.activity.includes(i.activity),t=!((m=e.destination)!=null&&m.length)||e.destination.includes(i.destination),n=!((s=e.accommodation)!=null&&s.length)||e.accommodation.includes(i.accommodation);const l=i.price,c=e.price?e.price.min:null,d=e.price?e.price.max:null;return c!==null&&d!==null?r=l>=c&&l<=d:c!==null?r=l>=c:d!==null&&(r=l<=d),a&&t&&n&&r})}function h(o,e){return Array.from(o.querySelectorAll(`input[name="${e}"]:checked`)).map(i=>i.value)}const g=document.getElementById("cards-container"),k=document.getElementById("form-filters"),y=document.querySelector(".nav__toggle"),q=document.querySelector(".nav__links"),_=document.querySelector(".filters-toogle-button"),S=document.querySelector(".filters-wrapper"),b=document.getElementById("close-bilters-button");function v(o,e){const i=o.getAttribute("data-visible")==="true";o.setAttribute("data-visible",!i),e.setAttribute("aria-expanded",!i)}y.addEventListener("click",()=>{v(q,y)});_.addEventListener("click",()=>{v(S,_)});b.addEventListener("click",()=>{v(S,b)});function B(o={}){g.innerHTML="",x(C,o).forEach(i=>{const a=new I(i);g.appendChild(a.render())})}k.addEventListener("change",o=>{const e=o.currentTarget,i=h(e,"activity"),a=h(e,"accommodation"),t=h(e,"destination"),n=document.getElementById("minPrice"),r=document.getElementById("maxPrice"),l=n?parseFloat(n.value):null,c=r?parseFloat(r.value):null,d={activity:i,accommodation:a,destination:t,price:{min:isNaN(l)?null:l,max:isNaN(c)?null:c}};B(d)});O();B();
